<!doctype html>

<html>
	<head>
		<title>Kafka Test</title>
		<style>
			
		</style>
	</head>
</html>

<script src="https://code.jquery.com/jquery-1.11.1.js"></script>
<script src="http://trirozhka.ru:3389/socket.io/socket.io.js"></script>

<script>
	var socket;
	
	function Connect()
	{
		
		socket = io.connect(':3389');
		$('#sys_message').text("Connected");
		
		socket.on('changed',function(num)
		{
			$('#sys_message').text(num);
		});
	}
	
	function Disconnect()
	{
		socket.disconnect();
		$('#sys_message').text("Disconnected");
	}
	
	function Increase(anon)
	{
		socket.emit('increase',anon);
	}
	
	function Decrease(anon)
	{
		socket.emit('decrease',anon);
	}

	function Creator()
	{
		
		var mail = document.getElementById('mail');
		var pass = document.getElementById('pass');

		if(mail == null || pass == null) return;

		socket.emit('acc_create', mail.value, pass.value);

		document.getElementById('sys_message').innerText = "Account Created with mail: " + mail.value + '; password: ' + pass.value;

	}


	function CreateAccount()
	{
		var creator = document.getElementById('creator');
		if(creator != null)
		{
			document.body.removeChild(creator);
		}
		else
		{
			creator = document.createElement('form');
			creator.id = "creator";
			var mail_input = document.createElement('input');
			mail_input.id = 'mail';
			var pass_input = document.createElement('input');
			pass_input.id = 'pass';
			pass_input.type = 'password';
			var ok = document.createElement('input');
			ok.type = 'button';
			ok.value = 'Create';
			ok.addEventListener('click', Creator)

			creator.appendChild(mail_input);
			creator.appendChild(pass_input);
			creator.appendChild(ok);
			document.body.appendChild(creator);
		}
		
	}

	

	function Login()
	{

	}
			
	

</script>

<body>
	<form action="">
		<p id="sys_message">Push the button</p>
		<input type="button" value="Connect" onclick="Connect()"></input>
		<input type="button" value="Increase Counter" onclick="Increase(false)"></input>
		<input type="button" value="Increase Anonymously" onclick="Increase(true)"></input>
		<input type="button" value="Decrease Anonymously" onclick="Decrease(true)"></input>
		<input type="button" value="Decrease Counter" onclick="Decrease(false)"></input>
		<input type="button" value="Disconnect" onclick="Disconnect()"></input>
		<input type="button" value="Create Account" onclick="CreateAccount()">
		<input type="button" value="Login" onclick="Login()">
	</form>
</body>
